# ูุธุงู ุงูุชุนุฏูู ุนูู ุงููุนุงููุงุช ุงููุฑุฏูุฉ

## ๐ฏ ุงููุฏู ูู ุงูุชุญุฏูุซ

### **ุงูุชุนุฏูู ุนูู ูู ูุนุงููุฉ ูููุตูุฉ**
- ุจุฏูุงู ูู ุงูุชุนุฏูู ุนูู ุงููุฌููุน ุงูููู ููุนูุตุฑ
- ุฅููุงููุฉ ุชุนุฏูู ูู ูุนุงููุฉ ุฏุฎูู/ุฎุฑูุฌ ุนูู ุญุฏุฉ
- ูุฑููุฉ ุฃูุจุฑ ูู ุฅุฏุงุฑุฉ ุงููุนุงููุงุช ุงููุชุนุฏุฏุฉ

## ๐ ุงููุดููุฉ ุงูุณุงุจูุฉ

### **ุงูุณููุงุฑูู ุงููุดูู:**
```
ูุนุงููุฉ 1: ุฏุฎูู 100 ููุจููุชุฑ
ูุนุงููุฉ 2: ุฏุฎูู 50 ููุจููุชุฑ
ุงููุฌููุน: 150 ููุจููุชุฑ

ุงููุธุงู ุงูุณุงุจู: ูุธูุฑ ูุนุงููุฉ ูุงุญุฏุฉ ุจู 150 (ูุฌููุน)
ุงููุธุงู ุงูุฌุฏูุฏ: ูุธูุฑ ูุนุงููุชูู ูููุตูุชูู (100 ู 50)
```

### **ููุงุฐุง ูุงู ูุฐุง ูุดููุฉุ**
- ุนุฏู ูุถูุญ ูู ุงููุนุงููุงุช ุงููุฑุฏูุฉ
- ุตุนูุจุฉ ูู ุชุชุจุน ูุนุงููุฉ ูุญุฏุฏุฉ
- ุชุนููุฏ ูู ุงูุชุนุฏูู ุงููุณุชูู ููู ูุนุงููุฉ

## โ ุงูุญู ุงูุฌุฏูุฏ

### **1. ุนุฑุถ ุฌููุน ุงููุนุงููุงุช ุงููุฑุฏูุฉ**
```python
# ูุจู ุงูุชุญุฏูุซ: ุขุฎุฑ ูุนุงููุฉ ููุท ููู ุนูุตุฑ
self.recent_transactions = filtered_transactions.drop_duplicates(subset=['ุงุณู_ุงูุนูุตุฑ'], keep='first')

# ุจุนุฏ ุงูุชุญุฏูุซ: ุฌููุน ุงููุนุงููุงุช ุงููุฑุฏูุฉ
self.recent_transactions = filtered_transactions.sort_values('ุงูุชุงุฑูุฎ', ascending=False)
```

### **2. ุนุฑุถ ูููุฉ ุงููุนุงููุฉ ุงููุฑุฏูุฉ**
```python
# ูุจู ุงูุชุญุฏูุซ: ุงููุฎุฒูู ุงูุฅุฌูุงูู
current_stock = self.get_current_stock(row['ุงุณู_ุงูุนูุตุฑ'])
quantity_item = QTableWidgetItem(str(current_stock))

# ุจุนุฏ ุงูุชุญุฏูุซ: ูููุฉ ุงููุนุงููุฉ ุงููุฑุฏูุฉ
transaction_quantity = int(row['ุงููููุฉ'])
quantity_item = QTableWidgetItem(str(transaction_quantity))
```

### **3. ุชุนุฏูู ุงููุนุงููุฉ ุงููุฑุฏูุฉ**
```python
def apply_modification(self, original_transaction, new_quantity, difference):
    """ุชุทุจูู ุงูุชุนุฏูู ุนูู ุงููุนุงููุฉ ุงููุฑุฏูุฉ"""
    try:
        # 1. ุชุณุฌูู ุงูุชุนุฏูู ูู ููู ูููุตู
        self.log_modification(original_transaction, new_quantity, difference)
        
        # 2. ุฅูุบุงุก ุงููุนุงููุฉ ุงูุฃุตููุฉ
        self.cancel_individual_transaction(original_transaction)
        
        # 3. ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ ุจุงููููุฉ ุงููุญุฏุซุฉ
        self.add_corrected_individual_transaction(original_transaction, new_quantity)
        
        return True
        
    except Exception as e:
        raise e
```

## ๐๏ธ ุงูุชูุงุตูู ุงูุชูููุฉ

### **ุฅูุบุงุก ุงููุนุงููุฉ ุงููุฑุฏูุฉ:**
```python
def cancel_individual_transaction(self, original_transaction):
    """ุฅูุบุงุก ุงููุนุงููุฉ ุงููุฑุฏูุฉ ุจูุนุงููุฉ ุนูุณูุฉ"""
    try:
        # ุฅูุดุงุก ูุนุงููุฉ ุนูุณูุฉ ูุฅูุบุงุก ุงููุนุงููุฉ ุงูุฃุตููุฉ
        if original_transaction['ููุน_ุงูุนูููุฉ'] == 'ุฏุฎูู':
            cancel_operation = 'ุฎุฑูุฌ'
        elif original_transaction['ููุน_ุงูุนูููุฉ'] == 'ุฎุฑูุฌ':
            cancel_operation = 'ุฏุฎูู'
        else:
            return  # ูุง ููุบู ุฃููุงุน ุงููุนุงููุงุช ุงูุฃุฎุฑู
        
        # ุงูุญุตูู ุนูู ุฑูู ุงููุนุงููุฉ ุงููุฑุฌุนูุฉ
        reference_id = original_transaction.get('ุฑูู_ุงููุนุงููุฉ', None)
        
        # ุฅุถุงูุฉ ุงููุนุงููุฉ ุงูุนูุณูุฉ
        excel_manager.record_transaction(
            self.project_name,
            original_transaction['ุงุณู_ุงูุนูุตุฑ'],
            original_transaction['ุงููููุฉ'],
            cancel_operation,
            f'ุฅูุบุงุก ูุนุงููุฉ ุฑูู {reference_id} - {self.reason_combo.currentText()}',
            reference_id=reference_id
        )
        
    except Exception as e:
        raise Exception(f"ุฎุทุฃ ูู ุฅูุบุงุก ุงููุนุงููุฉ: {str(e)}")
```

### **ุฅุถุงูุฉ ุงููุนุงููุฉ ุงููุตุญุญุฉ:**
```python
def add_corrected_individual_transaction(self, original_transaction, new_quantity):
    """ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ ุจุงููููุฉ ุงููุตุญุญุฉ"""
    try:
        if new_quantity == 0:
            return  # ูุง ุญุงุฌุฉ ูุฅุถุงูุฉ ูุนุงููุฉ ุฅุฐุง ูุงูุช ุงููููุฉ ุตูุฑ
        
        # ุงูุญุตูู ุนูู ุฑูู ุงููุนุงููุฉ ุงููุฑุฌุนูุฉ
        reference_id = original_transaction.get('ุฑูู_ุงููุนุงููุฉ', None)
        
        # ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ ุจููุณ ููุน ุงูุนูููุฉ ุงูุฃุตููุฉ ููู ุจุงููููุฉ ุงูุฌุฏูุฏุฉ
        excel_manager.record_transaction(
            self.project_name,
            original_transaction['ุงุณู_ุงูุนูุตุฑ'],
            new_quantity,
            original_transaction['ููุน_ุงูุนูููุฉ'],
            f'ุชุนุฏูู ูุนุงููุฉ ุฑูู {reference_id} - {self.reason_combo.currentText()}',
            reference_id=reference_id
        )
        
    except Exception as e:
        raise Exception(f"ุฎุทุฃ ูู ุฅุถุงูุฉ ุงููุนุงููุฉ ุงููุตุญุญุฉ: {str(e)}")
```

## ๐ ุฃูุซูุฉ ุนูููุฉ

### **ูุซุงู 1: ูุนุงููุงุช ูุชุนุฏุฏุฉ**
```
ุงููุถุน ุงูุฃุตูู:
โโโ ูุนุงููุฉ 001: ุฏุฎูู 100 ููุจููุชุฑ
โโโ ูุนุงููุฉ 002: ุฏุฎูู 50 ููุจููุชุฑ

ุงูุนุฑุถ ูู ุงููุธุงู ุงูุฌุฏูุฏ:
โโโโโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ ุฑูู ุงููุนุงููุฉ โ ุงูุชุงุฑูุฎ  โ ุงูุนูุตุฑ โ ููุน ุงูุนูููุฉ โ ูููุฉ ุงููุนุงููุฉ โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโค
โ 002         โ ุงูููู    โ ููุจููุชุฑ โ ุฏุฎูู       โ 50             โ
โ 001         โ ุฃูุณ      โ ููุจููุชุฑ โ ุฏุฎูู       โ 100            โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
```

### **ูุซุงู 2: ุชุนุฏูู ูุนุงููุฉ ูุฑุฏูุฉ**
```
ุชุนุฏูู ุงููุนุงููุฉ 001 ูู 100 ุฅูู 80:

ุงููุนุงููุงุช ุงููุถุงูุฉ:
โโโ ูุนุงููุฉ ุฌุฏูุฏุฉ: ุฎุฑูุฌ 100 (ุฅูุบุงุก ุงูุฃุตููุฉ)
โโโ     ุงูููุงุญุธุงุช: "ุฅูุบุงุก ูุนุงููุฉ ุฑูู 001 - ุชุตุญูุญ ุฎุทุฃ"
โโโ     ุงููุฑุฌุน: 001
โโโ ูุนุงููุฉ ุฌุฏูุฏุฉ: ุฏุฎูู 80 (ุงููููุฉ ุงูุฌุฏูุฏุฉ)  
โโโ     ุงูููุงุญุธุงุช: "ุชุนุฏูู ูุนุงููุฉ ุฑูู 001 - ุชุตุญูุญ ุฎุทุฃ"
โโโ     ุงููุฑุฌุน: 001

ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
โโโ ุงููุนุงููุฉ 001: ููุบูุฉ ุนูููุงู (100 ุฏุฎูู - 100 ุฎุฑูุฌ = 0)
โโโ ูุนุงููุฉ ุฌุฏูุฏุฉ: 80 ุฏุฎูู (ุชุนููุถ)
โโโ ุงููุนุงููุฉ 002: 50 ุฏุฎูู (ุจุฏูู ุชุบููุฑ)
```

## ๐ฏ ุงูููุงุฆุฏ ุงููุญููุฉ

### **ูููุณุชุฎุฏู:**
- โ **ุฑุคูุฉ ุดุงููุฉ**: ุนุฑุถ ุฌููุน ุงููุนุงููุงุช ุงููุฑุฏูุฉ
- โ **ุชุนุฏูู ุฏููู**: ุชุนุฏูู ูุนุงููุฉ ูุญุฏุฏุฉ ุฏูู ุชุฃุซูุฑ ุนูู ุงูุฃุฎุฑูุงุช  
- โ **ุดูุงููุฉ ูุงููุฉ**: ูุนุฑูุฉ ุฑูู ุงููุนุงููุฉ ุงููุนุฏูุฉ
- โ **ูุฑููุฉ ุฃูุจุฑ**: ุงูุชุนุงูู ูุน ูู ูุนุงููุฉ ููุญุฏุฉ ูููุตูุฉ

### **ูููุธุงู:**
- โ **ุฏูุฉ ุฃูุจุฑ**: ุชุชุจุน ุฏููู ูููุนุงููุงุช ุงููุฑุฏูุฉ
- โ **ุฑุจุท ูุฑุฌุนู**: ุฑุจุท ูุงุถุญ ุจูู ุงูุชุนุฏููุงุช ูุงููุนุงููุงุช ุงูุฃุตููุฉ
- โ **ุดูุงููุฉ ุงูุนูููุงุช**: ูู ุฅูุบุงุก ูุฅุถุงูุฉ ูุณุฌู ุจูุถูุญ
- โ **ุณูููุฉ ุงููุฑุงุฌุนุฉ**: ุชุชุจุน ุชุงุฑูุฎ ูู ูุนุงููุฉ ุนูู ุญุฏุฉ

## ๐ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุญุฏุซุฉ

### **ุนุฑุถ ุงููุนุงููุงุช ุงููุฑุฏูุฉ:**
```
ุฌุฏูู ุงููุนุงููุงุช ุงููุงุจูุฉ ููุชุนุฏูู:
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ ุฑูู ุงููุนุงููุฉ โ ุงูุชุงุฑูุฎ      โ ุงูุนูุตุฑ โ ุงูุชุตููู โ ููุน ุงูุนูููุฉ โ ูููุฉ ุงููุนุงููุฉ โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโค
โ 003         โ 2025-11-22   โ ููุจููุชุฑ โ ุฅููุชุฑูู  โ ุฏุฎูู       โ 50             โ
โ 001         โ 2025-11-21   โ ููุจููุชุฑ โ ุฅููุชุฑูู  โ ุฏุฎูู       โ 100            โ  
โ 002         โ 2025-11-21   โ ุทุงุจุนุฉ   โ ุฅููุชุฑูู  โ ุฏุฎูู       โ 25             โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
```

### **ุชุนุฏูู ุงููุนุงููุฉ:**
```
ุงููุนุงููุฉ ุงููุฎุชุงุฑุฉ: ููุจููุชุฑ - ุฏุฎูู (ุฑูู: 001)
ูููุฉ ุงููุนุงููุฉ: 100
ุงููููุฉ ุงูุฌุฏูุฏุฉ: [80]
ุงููุฑู ูู ุงููููุฉ: -20 (ููุต)
```

## ๐ ุงูุณููุงุฑูููุงุช ุงููุฏุนููุฉ

### **1. ูุนุงููุงุช ูุชุนุฏุฏุฉ ูููุณ ุงูุนูุตุฑ**
- ุนุฑุถ ูู ูุนุงููุฉ ูููุตูุฉ
- ุชุนุฏูู ุฃู ูุนุงููุฉ ุจุดูู ูุณุชูู
- ุงูุงุญุชูุงุธ ุจูููุฉ ูู ูุนุงููุฉ

### **2. ุชุนุฏูู ูุนุงููุงุช ูุฏููุฉ**
- ุชุนุฏูู ูุนุงููุฉ ูู ุฃุณุจูุน ูุถู (ุฅุฐุง ูุงูุช ุฎูุงู 24 ุณุงุนุฉ)
- ุนุฏู ุชุฃุซูุฑ ุนูู ุงููุนุงููุงุช ุงูุฃุญุฏุซ
- ุดูุงููุฉ ูู ุงูุชุนุฏูู ูุงูุฅูุบุงุก

### **3. ุชุชุจุน ุงูุชุนุฏููุงุช**
- ูู ุชุนุฏูู ูุฑุจูุท ุจุฑูู ุงููุนุงููุฉ ุงูุฃุตููุฉ
- ุณุฌู ูุงูู ููุฅูุบุงุกุงุช ูุงูุฅุถุงูุงุช
- ุฅููุงููุฉ ูุฑุงุฌุนุฉ ุชุงุฑูุฎ ุงูุชุนุฏููุงุช

## โก ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุฌุฏูุฏ ูููุฑ:
- **ุนุฑุถ ุดุงูู** ูุฌููุน ุงููุนุงููุงุช ุงููุฑุฏูุฉ
- **ุชุนุฏูู ุฏููู** ููู ูุนุงููุฉ ุนูู ุญุฏุฉ  
- **ุดูุงููุฉ ูุงููุฉ** ูู ุงูุนูููุงุช ูุงูุชุนุฏููุงุช
- **ูุฑููุฉ ุฃูุจุฑ** ูู ุฅุฏุงุฑุฉ ุงููุฎุฒูู
- **ุฑุจุท ูุฑุฌุนู ูุงุถุญ** ุจูู ุงูุชุนุฏููุงุช ูุงูุฃุตู

ูุฐุง ูุฌุนู ุงููุธุงู ุฃูุซุฑ ุฏูุฉ ููุถูุญุงู ูู ุงูุชุนุงูู ูุน ุงููุนุงููุงุช ุงููุชุนุฏุฏุฉ! ๐