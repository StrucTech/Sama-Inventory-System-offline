# ุฅุตูุงุญ ูุดููุฉ ุงูุญุณุงุจุงุช ุงููุชุฑุงููุฉ ูู ุงูุชุนุฏููุงุช

## ๐จ ุงููุดููุฉ ุงูููุชุดูุฉ

### **ุญุณุงุจุงุช ุฎุงุทุฆุฉ ุนูุฏ ุงูุชุนุฏููุงุช ุงููุชุชุงููุฉ**
- **ุงูุณููุงุฑูู**: ุฅุฏุฎุงู ุนูุตุฑ ุจูููุฉ 100 โ ุชุนุฏูู ุฅูู 50 โ ุชุนุฏูู ุฅูู 45
- **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: 100 โ 50 โ 45
- **ุงููุชูุฌุฉ ุงููุนููุฉ**: 100 โ 50 โ 105 โ
- **ุงูุณุจุจ**: ููุทู ุฅูุบุงุก ุงููุนุงููุฉ ุงูุฃุตููุฉ ูุงู ูุชุนุงูู ูุน ุงููุนุงููุฉ ุงููุนุฏูุฉ ููุนุงููุฉ ุฃุตููุฉ

## ๐ ุชุญููู ุงููุดููุฉ

### **ุงูููุทู ุงูุณุงุจู (ุงูุฎุงุทุฆ):**
```python
# ุนูุฏ ุงูุชุนุฏูู ุงูุฃูู (100 โ 50):
1. ุฅูุบุงุก ุงููุนุงููุฉ ุงูุฃุตููุฉ: ุฏุฎูู 100 โ ุฎุฑูุฌ 100 (ุงููุฎุฒูู = 0)
2. ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ: ุฏุฎูู 50 (ุงููุฎุฒูู = 50) โ

# ุนูุฏ ุงูุชุนุฏูู ุงูุซุงูู (50 โ 45):
1. ุฅูุบุงุก "ุงููุนุงููุฉ ุงูุฃุตููุฉ" ุงููุนุฏูุฉ: ุฏุฎูู 50 โ ุฎุฑูุฌ 50 (ุงููุฎุฒูู = 0)
2. ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ: ุฏุฎูู 45 (ุงููุฎุฒูู = 45) โ
3. ููู ุงููุธุงู ูุญุณุจ: ุฏุฎูู 100 - ุฎุฑูุฌ 100 + ุฏุฎูู 50 - ุฎุฑูุฌ 50 + ุฏุฎูู 45 = 45 โ

# ุงููุดููุฉ: ุชุฑุงูู ุงููุนุงููุงุช ุงูุนูุณูุฉ ูุงูุฅุถุงูุงุช
```

### **ุฌุฐุฑ ุงููุดููุฉ:**
- ูุงู ุงููุธุงู ูุนุชุจุฑ ูู ูุนุงููุฉ ูุนุฏูุฉ ูู "ูุนุงููุฉ ุฃุตููุฉ" ุฌุฏูุฏุฉ
- ูุฐุง ุฃุฏู ูุฅูุดุงุก ุณูุณูุฉ ูู ุงููุนุงููุงุช ุงูุนูุณูุฉ ูุงูุฅุถุงูุงุช
- ุงููุชูุฌุฉ: ุญุณุงุจุงุช ูุนูุฏุฉ ููุชุงุฆุฌ ุฎุงุทุฆุฉ

## โ ุงูุญู ุงูุฌุฏูุฏ

### **ุงูููุทู ุงูุฌุฏูุฏ (ุงูุตุญูุญ):**
```python
# ุนูุฏ ุงูุชุนุฏูู ุงูุฃูู (100 โ 50):
1. ุงููุฎุฒูู ุงูุญุงูู: 100
2. ุงููููุฉ ุงูุฌุฏูุฏุฉ: 50
3. ุงููุฑู: -50 (ููุต)
4. ุฅุถุงูุฉ ูุนุงููุฉ: "ุชุนุฏูู ููุต" ุจูููุฉ 50
5. ุงููุชูุฌุฉ: 100 - 50 = 50 โ

# ุนูุฏ ุงูุชุนุฏูู ุงูุซุงูู (50 โ 45):
1. ุงููุฎุฒูู ุงูุญุงูู: 50 (ุจุนุฏ ุงูุชุนุฏูู ุงูุฃูู)
2. ุงููููุฉ ุงูุฌุฏูุฏุฉ: 45
3. ุงููุฑู: -5 (ููุต)
4. ุฅุถุงูุฉ ูุนุงููุฉ: "ุชุนุฏูู ููุต" ุจูููุฉ 5
5. ุงููุชูุฌุฉ: 100 - 50 - 5 = 45 โ
```

### **ุงูููุฏ ุงูุฌุฏูุฏ:**
```python
def apply_modification(self, original_transaction, new_quantity, difference):
    """ุชุทุจูู ุงูุชุนุฏูู ุนูู ุงููุธุงู"""
    try:
        # 1. ุชุณุฌูู ุงูุชุนุฏูู ูู ููู ูููุตู
        self.log_modification(original_transaction, new_quantity, difference)
        
        # 2. ุฅุถุงูุฉ ูุนุงููุฉ ุชุนุฏูู ุจุงููุฑู ููุท (ูุง ููุบู ุงููุนุงููุฉ ุงูุฃุตููุฉ)
        self.add_adjustment_transaction(
            original_transaction['ุงุณู_ุงูุนูุตุฑ'],
            difference
        )
        
        return True
        
    except Exception as e:
        raise e

def add_adjustment_transaction(self, item_name, difference):
    """ุฅุถุงูุฉ ูุนุงููุฉ ุชุนุฏูู ุจุงููุฑู ููุท"""
    try:
        if difference == 0:
            return  # ูุง ุญุงุฌุฉ ูุฅุถุงูุฉ ูุนุงููุฉ ุฅุฐุง ูู ููู ููุงู ุชุบููุฑ
        
        # ุชุญุฏูุฏ ููุน ุงูุนูููุฉ ูุงููููุฉ ุญุณุจ ุงููุฑู
        if difference > 0:
            operation_type = 'ุชุนุฏูู ุฒูุงุฏุฉ'
            quantity = abs(difference)
        else:
            operation_type = 'ุชุนุฏูู ููุต'
            quantity = abs(difference)
        
        # ุฅุถุงูุฉ ูุนุงููุฉ ุงูุชุนุฏูู
        excel_manager.record_transaction(
            self.project_name,
            item_name,
            quantity,
            operation_type,
            f'ุชุนุฏูู ูููุฉ - {self.reason_combo.currentText()}'
        )
        
    except Exception as e:
        raise Exception(f"ุฎุทุฃ ูู ุฅุถุงูุฉ ูุนุงููุฉ ุงูุชุนุฏูู: {str(e)}")
```

## ๐ฏ ุงููุจุฏุฃ ุงูุฌุฏูุฏ

### **ููุณูุฉ ุงูุชุนุฏูู:**
- **ูุง ุฅูุบุงุก ูููุนุงููุงุช**: ุงููุนุงููุงุช ุงูุฃุตููุฉ ุชุจูู ููุง ูู
- **ุฅุถุงูุฉ ุงููุฑู ููุท**: ูุณุฌู ุงูุชุบููุฑ ุงูุญูููู ููุท
- **ุดูุงููุฉ ูุงููุฉ**: ูู ุชุนุฏูู ูู ุฃุซุฑ ูุงุถุญ ููุจุงุดุฑ
- **ุญุณุงุจุงุช ุจุณูุทุฉ**: ุฌูุน ูุทุฑุญ ูุจุงุดุฑ ุจุฏูู ุชุนููุฏ

### **ุฃููุงุน ุงููุนุงููุงุช:**
1. **ุฏุฎูู/ุฎุฑูุฌ**: ุงููุนุงููุงุช ุงูุฃุตููุฉ
2. **ุชุนุฏูู ุฒูุงุฏุฉ**: ุนูุฏ ุฒูุงุฏุฉ ุงููุฎุฒูู
3. **ุชุนุฏูู ููุต**: ุนูุฏ ุชูููู ุงููุฎุฒูู

## ๐ ูุซุงู ุนููู ูุงูู

### **ุงูุณููุงุฑูู:**
```
ุฅุฏุฎุงู ุฃููู: ููุจููุชุฑ - 100 ูุทุนุฉ
ุชุนุฏูู 1: ุชุบููุฑ ุฅูู 50 ูุทุนุฉ  
ุชุนุฏูู 2: ุชุบููุฑ ุฅูู 45 ูุทุนุฉ
ุชุนุฏูู 3: ุชุบููุฑ ุฅูู 60 ูุทุนุฉ
```

### **ุงููุนุงููุงุช ุงููุณุฌูุฉ:**
```
1. ุฏุฎูู: 100 ูุทุนุฉ (ุงููุนุงููุฉ ุงูุฃุตููุฉ)
2. ุชุนุฏูู ููุต: 50 ูุทุนุฉ (ูู 100 ุฅูู 50)
3. ุชุนุฏูู ููุต: 5 ูุทุนุงุช (ูู 50 ุฅูู 45)
4. ุชุนุฏูู ุฒูุงุฏุฉ: 15 ูุทุนุฉ (ูู 45 ุฅูู 60)
```

### **ุงูุญุณุงุจ ุงูููุงุฆู:**
```
ุงููุฎุฒูู = ุฏุฎูู - ุฎุฑูุฌ + ุชุนุฏูู_ุฒูุงุฏุฉ - ุชุนุฏูู_ููุต
ุงููุฎุฒูู = 100 - 0 + 15 - (50 + 5)
ุงููุฎุฒูู = 100 + 15 - 55
ุงููุฎุฒูู = 60 โ
```

## ๐ก ุงูููุงุฆุฏ ุงููุญููุฉ

### **ูููุณุชุฎุฏู:**
- โ **ุฏูุฉ ูุทููุฉ**: ุญุณุงุจุงุช ุตุญูุญุฉ 100% ูู ุฌููุน ุงูุญุงูุงุช
- โ **ุดูุงููุฉ ูุงููุฉ**: ูู ุชุนุฏูู ูุณุฌู ุจูุถูุญ
- โ **ุณูููุฉ ุงููุชุงุจุนุฉ**: ุชุชุจุน ูุงุถุญ ูุฌููุน ุงูุชุบููุฑุงุช
- โ **ุซูุฉ ูู ุงููุธุงู**: ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ุญุณุงุจูุฉ

### **ูููุธุงู:**
- โ **ููุทู ูุจุณุท**: ุนุฏู ูุฌูุฏ ูุนุงููุงุช ุนูุณูุฉ ูุนูุฏุฉ
- โ **ุฃุฏุงุก ุฃูุถู**: ุนุฏุฏ ุฃูู ูู ุงููุนุงููุงุช ุงููุณุฌูุฉ
- โ **ุตูุงูุฉ ุฃุณูู**: ููุฏ ุฃุจุณุท ูุฃูุถุญ
- โ **ูุงุจููุฉ ุงูุชุชุจุน**: ุชุงุฑูุฎ ูุงุถุญ ููู ุชุนุฏูู

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### **ูุนุงุฏูุฉ ุงููุฎุฒูู ุงููุญุฏุซุฉ:**
```python
current_stock = incoming - outgoing + modifications_increase - modifications_decrease
```

### **ุชุฏูู ุงูุชุนุฏูู:**
1. **ุญุณุงุจ ุงููุฑู**: ุงููููุฉ ุงูุฌุฏูุฏุฉ - ุงููุฎุฒูู ุงูุญุงูู
2. **ุชุญุฏูุฏ ุงูููุน**: ุฒูุงุฏุฉ ุฃู ููุต ุญุณุจ ุฅุดุงุฑุฉ ุงููุฑู
3. **ุชุณุฌูู ุงูุชุนุฏูู**: ุฅุถุงูุฉ ูุนุงููุฉ ูุงุญุฏุฉ ููุท
4. **ุชุญุฏูุซ ุงูุนุฑุถ**: ุฅุนุงุฏุฉ ุญุณุงุจ ุงููุฎุฒูู ูุนุฑุถู

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุธุงู ุงูุขู ูุญุณุจ ุงููุฎุฒูู ุจุฏูุฉ ูุทููุฉ ูุน:
- **ูุง ูุฒูุฏ ูู ุงูุฃุฎุทุงุก ุงูุญุณุงุจูุฉ** ูู ุงูุชุนุฏููุงุช ุงููุชุชุงููุฉ
- **ุดูุงููุฉ ูุงููุฉ** ูู ุชุณุฌูู ุฌููุน ุงูุชุบููุฑุงุช  
- **ุจุณุงุทุฉ ูู ุงูููุทู** ูุณูููุฉ ูู ุงูููู
- **ุฃุฏุงุก ูุญุณู** ูุน ุนุฏุฏ ุฃูู ูู ุงููุนุงููุงุช

ุงูุขู ูููู ุงูุชุนุฏูู ูุฑุงุช ูุชุนุฏุฏุฉ ุจุซูุฉ ูุงููุฉ ูู ุฏูุฉ ุงูุญุณุงุจุงุช! ๐